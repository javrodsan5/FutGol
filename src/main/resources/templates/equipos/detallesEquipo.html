<!DOCTYPE html>

<html xmlns:th="http://www.thymeleaf.org"
      th:replace="~{fragments/layout :: layout (~{::body},'ligas-login')}">

<body>

<script>
    function cambiarFormacion(formacion) {
        var jugadores = document.getElementsByClassName("player")
        for (i = 0; i < jugadores.length; i++) {
            var clase = jugadores[i].className

            if (clase.includes('433')) {
                jugadores[i].className = clase.replace('433', formacion);
            } else if (clase.includes('442')) {
                jugadores[i].className = clase.replace('442', formacion);
            } else if (clase.includes('352')) {
                jugadores[i].className = clase.replace('352', formacion);
            } else if (clase.includes('451')) {
                jugadores[i].className = clase.replace('451', formacion);
            } else {
                jugadores[i].className = clase.replace('532', formacion);
            }

        }
    }
</script>

<h2 th:if="${tengoEquipo}">

    <div th:if="${equipo.formacion}=='4-3-3'">
        <script>
            $(document).ready(function () {
                cambiarFormacion('433')
            });
        </script>
    </div>
    <div th:if="${equipo.formacion}=='3-5-2'">
        <script>
            $(document).ready(function () {
                cambiarFormacion('352')
            });
        </script>
    </div>
    <div th:if="${equipo.formacion}=='5-3-2'">
        <script>
            $(document).ready(function () {
                cambiarFormacion('532')
            });
        </script>
    </div>
    <div th:if="${equipo.formacion}=='4-5-1'">
        <script>
            $(document).ready(function () {
                cambiarFormacion('451')
            });
        </script>
    </div>
    <div>
        <ul style="display: inline-block;">
            <li th:each="pje : ${ptosJorEq}">Jornada <b th:text="${pje.jornada.numeroJornada}"></b> <b>: </b> <b
                    th:text="${pje.puntos}"/> puntos
            </li>
        </ul>
    </div>

    <br><br>

    <div>
        <h1 th:if="${miEquipo==false}">Equipo de <b th:text="${equipo.usuario.user.username}"></b></h1>

        <h1><b th:text="${equipo.name}"></b></h1>
        <div th:if="${miEquipo}" style="display: inline-block">Dinero restante: <b
                th:text="${equipo.dineroRestante}"></b>€
        </div>
        <div style="display: inline-block">Numero de jugadores: <b th:text="${equipo.jugadores.size}"></b>/24</div>
        <div style="display: inline-block">Puntos: <b th:text="${equipo.puntos}"></b></div>
        <div style="display: inline-block">Valor del equipo: <b th:text="${valorEquipo}"></b> mill. €</div>
        <div th:if="${miEquipo}" th:align="right">
            <a class="btn btn-default" th:href="@{/liga/{idLiga}/misMovimientos (idLiga= ${liga.id})}">
                <span class="glyphicon glyphicon-signal"></span> Mis movimientos en la liga</a>
        </div>
    </div>
    <div th:if="${miEquipo}" class="dropdown">
        <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown"
                aria-haspopup="true" aria-expanded="true">
            Formaciones
            <span class="caret"></span>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
            <li>
                <a th:href="@{/liga/{idLiga}/miEquipo/cambiarFormacion/{formacion} (idLiga= ${liga.id},formacion='442')}">4-4-2</a>
            </li>
            <li>
                <a th:href="@{/liga/{idLiga}/miEquipo/cambiarFormacion/{formacion} (idLiga= ${liga.id},formacion='433')}">4-3-3</a>
            </li>
            <li>
                <a th:href="@{/liga/{idLiga}/miEquipo/cambiarFormacion/{formacion} (idLiga= ${liga.id},formacion='352')}">3-5-2</a>
            </li>
            <li>
                <a th:href="@{/liga/{idLiga}/miEquipo/cambiarFormacion/{formacion} (idLiga= ${liga.id},formacion='532')}">5-3-2</a>
            </li>
            <li>
                <a th:href="@{/liga/{idLiga}/miEquipo/cambiarFormacion/{formacion} (idLiga= ${liga.id},formacion='451')}">4-5-1</a>
            </li>

        </ul>
    </div>
    <div>Formación actual: <b th:text="${equipo.formacion}"></b></div>
    <div class="field">
        <div class="grass"></div>
        <div class="map">
            <div class="outline"></div>
            <div class="midline"></div>
            <div class="midcircle"></div>
            <div class="spot_center"></div>
            <div class="leftgoals"></div>
            <div class="left_goal"></div>
            <div class="left_circle-area"></div>
            <div class="left_goals_little"></div>
            <div class="spot_left"></div>
            <div class="right_goal"></div>
            <div class="rightgoals"></div>
            <div class="right_circle-area"></div>
            <div class="right_goals_little"></div>
            <div class="spot_right"></div>
        </div>

        <div class="player p1" th:object="${equipo.onceInicial[0]}">
            <img th:src="*{foto}" class="image--cover img-responsive">
            <br>
            <div class="message-container--player"><p class="message--player" th:text="*{name}"></p></div>
            <div class="info">
                <div style="display:inline-block;float: left">
                    <h2 th:text="*{name}"></h2>
                    <h4>Estado: <b th:text="*{estadoLesion}"></b></h4>
                    <h4>Valor: <b th:text="*{valor}"></b> mill. €</h4>
                    <h4>Puntos: <b th:text="*{puntos}"></b>pts</h4>
                    <h4>Últimas jornadas jugadas:</h4>

                    <div style="display: inline-grid" th:each="e, it : ${equipo.onceInicial[0].estadisticas}"
                         th:if="${it.index >= it.size-5}">
                        <div style="display: inline-block">
                            <b>
                                <h5 style="display: inline"><p
                                        th:text="J+${e.partido.jornada.numeroJornada}"></p></h5>
                            </b>
                        </div>

                        <div class="circulo"><p th:text="${e.puntos}"></p></div>
                    </div>
                    <a th:if="${miEquipo}"
                       th:href="@{/liga/{idLiga}/miEquipo/cambiarOnce/{idJugador} (idLiga = ${liga.id} ,idJugador= *{id})}">
                        <button class="botonSust">Sustituir</button>
                    </a>
                </div>
            </div>
        </div>
        <div class="player p2-442" th:object="${equipo.onceInicial[1]}">
            <div style="display: inline-block;">
                <img th:src="*{foto}" class="image--cover img-responsive">
            </div>
            <div class="message-container--player" style="display: inline-block; margin-left: 15%"><p
                    class="message--player" th:text="*{name}"></p></div>
            <div class="info">
                <div style="display:inline-block;float: left">
                    <h2 th:text="*{name}"></h2>
                    <h4>Estado: <b th:text="*{estadoLesion}"></b></h4>
                    <h4>Valor: <b th:text="*{valor}"></b> mill. €</h4>
                    <h4>Puntos: <b th:text="*{puntos}"></b>pts</h4>
                    <h4>Últimas jornadas jugadas:</h4>

                    <div style="display: inline-grid" th:each="e, it : ${equipo.onceInicial[1].estadisticas}"
                         th:if="${it.index >= it.size-5}">
                        <div style="display: inline-block">
                            <b>
                                <h5 style="display: inline"><p
                                        th:text="J+${e.partido.jornada.numeroJornada}"></p></h5>
                            </b>
                        </div>

                        <div class="circulo"><p th:text="${e.puntos}"></p></div>
                    </div>
                    <a th:if="${miEquipo}"
                       th:href="@{/liga/{idLiga}/miEquipo/cambiarOnce/{idJugador} (idLiga = ${liga.id} ,idJugador= *{id})}">
                        <button class="botonSust">Sustituir</button>
                    </a>
                </div>
            </div>
        </div>
        <div class="player p3-442" th:object="${equipo.onceInicial[2]}">
            <div style="display: inline-block;">
                <img th:src="*{foto}" class="image--cover img-responsive">
            </div>
            <div class="message-container--player" style="display: inline-block; margin-left: 15%"><p
                    class="message--player" th:text="*{name}"></p></div>
            <div class="info">
                <div style="display:inline-block;float: left">
                    <h2 th:text="*{name}"></h2>
                    <h4>Estado: <b th:text="*{estadoLesion}"></b></h4>
                    <h4>Valor: <b th:text="*{valor}"></b> mill. €</h4>
                    <h4>Puntos: <b th:text="*{puntos}"></b>pts</h4>
                    <h4>Últimas jornadas jugadas:</h4>

                    <div style="display: inline-grid" th:each="e, it : ${equipo.onceInicial[2].estadisticas}"
                         th:if="${it.index >= it.size-5}">
                        <div style="display: inline-block">
                            <b>
                                <h5 style="display: inline"><p
                                        th:text="J+${e.partido.jornada.numeroJornada}"></p></h5>
                            </b>
                        </div>

                        <div class="circulo"><p th:text="${e.puntos}"></p></div>
                    </div>
                    <a th:if="${miEquipo}"
                       th:href="@{/liga/{idLiga}/miEquipo/cambiarOnce/{idJugador} (idLiga = ${liga.id} ,idJugador= *{id})}">
                        <button class="botonSust">Sustituir</button>
                    </a>
                </div>
            </div>
        </div>
        <div class="player p4-442" th:object="${equipo.onceInicial[3]}">
            <div style="display: inline-block;">
                <img th:src="*{foto}" class="image--cover img-responsive">
            </div>
            <div class="message-container--player" style="display: inline-block; margin-left: 15%"><p
                    class="message--player" th:text="*{name}"></p></div>
            <div class="info">
                <div style="display:inline-block;float: left">
                    <h2 th:text="*{name}"></h2>
                    <h4>Estado: <b th:text="*{estadoLesion}"></b></h4>
                    <h4>Valor: <b th:text="*{valor}"></b> mill. €</h4>
                    <h4>Puntos: <b th:text="*{puntos}"></b>pts</h4>
                    <h4>Últimas jornadas jugadas:</h4>

                    <div style="display: inline-grid" th:each="e, it : ${equipo.onceInicial[3].estadisticas}"
                         th:if="${it.index >= it.size-5}">
                        <div style="display: inline-block">
                            <b>
                                <h5 style="display: inline"><p
                                        th:text="J+${e.partido.jornada.numeroJornada}"></p></h5>
                            </b>
                        </div>

                        <div class="circulo"><p th:text="${e.puntos}"></p></div>
                    </div>
                    <a th:if="${miEquipo}"
                       th:href="@{/liga/{idLiga}/miEquipo/cambiarOnce/{idJugador} (idLiga = ${liga.id} ,idJugador= *{id})}">
                        <button class="botonSust">Sustituir</button>
                    </a>
                </div>
            </div>
        </div>
        <div class="player p5-442" th:object="${equipo.onceInicial[4]}">
            <div style="display: inline-block;">
                <img th:src="*{foto}" class="image--cover img-responsive">
            </div>
            <div class="message-container--player" style="display: inline-block; margin-left: 15%"><p
                    class="message--player" th:text="*{name}"></p></div>
            <div class="info">
                <div style="display:inline-block;float: left">
                    <h2 th:text="*{name}"></h2>
                    <h4>Estado: <b th:text="*{estadoLesion}"></b></h4>
                    <h4>Valor: <b th:text="*{valor}"></b> mill. €</h4>
                    <h4>Puntos: <b th:text="*{puntos}"></b>pts</h4>
                    <h4>Últimas jornadas jugadas:</h4>

                    <div style="display: inline-grid" th:each="e, it : ${equipo.onceInicial[4].estadisticas}"
                         th:if="${it.index >= it.size-5}">
                        <div style="display: inline-block">
                            <b>
                                <h5 style="display: inline"><p
                                        th:text="J+${e.partido.jornada.numeroJornada}"></p></h5>
                            </b>
                        </div>

                        <div class="circulo"><p th:text="${e.puntos}"></p></div>
                    </div>
                    <a th:if="${miEquipo}"
                       th:href="@{/liga/{idLiga}/miEquipo/cambiarOnce/{idJugador} (idLiga = ${liga.id} ,idJugador= *{id})}">
                        <button class="botonSust">Sustituir</button>
                    </a>
                </div>
            </div>
        </div>
        <div class="player p6-442" th:object="${equipo.onceInicial[5]}">
            <div style="display: inline-block;">
                <img th:src="*{foto}" class="image--cover img-responsive">
            </div>
            <div class="message-container--player" style="display: inline-block; margin-left: 15%"><p
                    class="message--player" th:text="*{name}"></p></div>
            <div class="info">
                <div style="display:inline-block;float: left">
                    <h2 th:text="*{name}"></h2>
                    <h4>Estado: <b th:text="*{estadoLesion}"></b></h4>
                    <h4>Valor: <b th:text="*{valor}"></b> mill. €</h4>
                    <h4>Puntos: <b th:text="*{puntos}"></b>pts</h4>
                    <h4>Últimas jornadas jugadas:</h4>

                    <div style="display: inline-grid" th:each="e, it : ${equipo.onceInicial[5].estadisticas}"
                         th:if="${it.index >= it.size-5}">
                        <div style="display: inline-block">
                            <b>
                                <h5 style="display: inline"><p
                                        th:text="J+${e.partido.jornada.numeroJornada}"></p></h5>
                            </b>
                        </div>

                        <div class="circulo"><p th:text="${e.puntos}"></p></div>
                    </div>
                    <a th:if="${miEquipo}"
                       th:href="@{/liga/{idLiga}/miEquipo/cambiarOnce/{idJugador} (idLiga = ${liga.id} ,idJugador= *{id})}">
                        <button class="botonSust">Sustituir</button>
                    </a>
                </div>
            </div>
        </div>
        <div class="player p7-442" th:object="${equipo.onceInicial[6]}">
            <div style="display: inline-block;">
                <img th:src="*{foto}" class="image--cover img-responsive">
            </div>
            <div class="message-container--player" style="display: inline-block; margin-left: 15%"><p
                    class="message--player" th:text="*{name}"></p></div>
            <div class="info">
                <div style="display:inline-block;float: left">
                    <h2 th:text="*{name}"></h2>
                    <h4>Estado: <b th:text="*{estadoLesion}"></b></h4>
                    <h4>Valor: <b th:text="*{valor}"></b> mill. €</h4>
                    <h4>Puntos: <b th:text="*{puntos}"></b>pts</h4>
                    <h4>Últimas jornadas jugadas:</h4>

                    <div style="display: inline-grid" th:each="e, it : ${equipo.onceInicial[6].estadisticas}"
                         th:if="${it.index >= it.size-5}">
                        <div style="display: inline-block">
                            <b>
                                <h5 style="display: inline"><p
                                        th:text="J+${e.partido.jornada.numeroJornada}"></p></h5>
                            </b>
                        </div>

                        <div class="circulo"><p th:text="${e.puntos}"></p></div>
                    </div>
                    <a th:if="${miEquipo}"
                       th:href="@{/liga/{idLiga}/miEquipo/cambiarOnce/{idJugador} (idLiga = ${liga.id} ,idJugador= *{id})}">
                        <button class="botonSust">Sustituir</button>
                    </a>
                </div>
            </div>
        </div>
        <div class="player p8-442" th:object="${equipo.onceInicial[7]}">
            <div style="display: inline-block;">
                <img th:src="*{foto}" class="image--cover img-responsive">
            </div>
            <div class="message-container--player" style="display: inline-block; margin-left: 15%"><p
                    class="message--player" th:text="*{name}"></p></div>
            <div class="info">
                <div style="display:inline-block;float: left">
                    <h2 th:text="*{name}"></h2>
                    <h4>Estado: <b th:text="*{estadoLesion}"></b></h4>
                    <h4>Valor: <b th:text="*{valor}"></b> mill. €</h4>
                    <h4>Puntos: <b th:text="*{puntos}"></b>pts</h4>
                    <h4>Últimas jornadas jugadas:</h4>

                    <div style="display: inline-grid" th:each="e, it : ${equipo.onceInicial[7].estadisticas}"
                         th:if="${it.index >= it.size-5}">
                        <div style="display: inline-block">
                            <b>
                                <h5 style="display: inline"><p
                                        th:text="J+${e.partido.jornada.numeroJornada}"></p></h5>
                            </b>
                        </div>

                        <div class="circulo"><p th:text="${e.puntos}"></p></div>
                    </div>
                    <a th:if="${miEquipo}"
                       th:href="@{/liga/{idLiga}/miEquipo/cambiarOnce/{idJugador} (idLiga = ${liga.id} ,idJugador= *{id})}">
                        <button class="botonSust">Sustituir</button>
                    </a>
                </div>
            </div>
        </div>
        <div class="player p9-442" th:object="${equipo.onceInicial[8]}">
            <div style="display: inline-block;">
                <img th:src="*{foto}" class="image--cover img-responsive">
            </div>
            <div class="message-container--player" style="display: inline-block; margin-left: 15%"><p
                    class="message--player" th:text="*{name}"></p></div>
            <div class="info">
                <div style="display:inline-block;float: left">
                    <h2 th:text="*{name}"></h2>
                    <h4>Estado: <b th:text="*{estadoLesion}"></b></h4>
                    <h4>Valor: <b th:text="*{valor}"></b> mill. €</h4>
                    <h4>Puntos: <b th:text="*{puntos}"></b>pts</h4>
                    <h4>Últimas jornadas jugadas:</h4>

                    <div style="display: inline-grid" th:each="e, it : ${equipo.onceInicial[8].estadisticas}"
                         th:if="${it.index >= it.size-5}">
                        <div style="display: inline-block">
                            <b>
                                <h5 style="display: inline"><p
                                        th:text="J+${e.partido.jornada.numeroJornada}"></p></h5>
                            </b>
                        </div>

                        <div class="circulo"><p th:text="${e.puntos}"></p></div>
                    </div>
                    <a th:if="${miEquipo}"
                       th:href="@{/liga/{idLiga}/miEquipo/cambiarOnce/{idJugador} (idLiga = ${liga.id} ,idJugador= *{id})}">
                        <button class="botonSust">Sustituir</button>
                    </a>
                </div>
            </div>
        </div>
        <div class="player p10-442" th:object="${equipo.onceInicial[9]}">
            <div style="display: inline-block;">
                <img th:src="*{foto}" class="image--cover img-responsive">
            </div>
            <div class="message-container--player" style="display: inline-block; margin-left: 15%"><p
                    class="message--player" th:text="*{name}"></p></div>
            <div class="info">
                <div style="display:inline-block;float: left">
                    <h2 th:text="*{name}"></h2>
                    <h4>Estado: <b th:text="*{estadoLesion}"></b></h4>
                    <h4>Valor: <b th:text="*{valor}"></b> mill. €</h4>
                    <h4>Puntos: <b th:text="*{puntos}"></b>pts</h4>
                    <h4>Últimas jornadas jugadas:</h4>

                    <div style="display: inline-grid" th:each="e, it : ${equipo.onceInicial[9].estadisticas}"
                         th:if="${it.index >= it.size-5}">
                        <div style="display: inline-block">
                            <b>
                                <h5 style="display: inline"><p
                                        th:text="J+${e.partido.jornada.numeroJornada}"></p></h5>
                            </b>
                        </div>

                        <div class="circulo"><p th:text="${e.puntos}"></p></div>
                    </div>
                    <a th:if="${miEquipo}"
                       th:href="@{/liga/{idLiga}/miEquipo/cambiarOnce/{idJugador} (idLiga = ${liga.id} ,idJugador= *{id})}">
                        <button class="botonSust">Sustituir</button>
                    </a>
                </div>
            </div>
        </div>
        <div class="player p11-442" th:object="${equipo.onceInicial[10]}">
            <div style="display: inline-block;">
                <img th:src="*{foto}" class="image--cover img-responsive">
            </div>
            <div class="message-container--player" style="display: inline-block; margin-left: 15%"><p
                    class="message--player" th:text="*{name}"></p></div>
            <div class="info">
                <div style="display:inline-block;float: left">
                    <h2 th:text="*{name}"></h2>
                    <h4>Estado: <b th:text="*{estadoLesion}"></b></h4>
                    <h4>Valor: <b th:text="*{valor}"></b> mill. €</h4>
                    <h4>Puntos: <b th:text="*{puntos}"></b>pts</h4>
                    <h4>Últimas jornadas jugadas:</h4>

                    <div style="display: inline-grid" th:each="e, it : ${equipo.onceInicial[10].estadisticas}"
                         th:if="${it.index >= it.size-5}">
                        <div style="display: inline-block">
                            <b>
                                <h5 style="display: inline"><p
                                        th:text="J+${e.partido.jornada.numeroJornada}"></p></h5>
                            </b>
                        </div>

                        <div class="circulo"><p th:text="${e.puntos}"></p></div>
                    </div>
                    <a th:if="${miEquipo}"
                       th:href="@{/liga/{idLiga}/miEquipo/cambiarOnce/{idJugador} (idLiga = ${liga.id} ,idJugador= *{id})}">
                        <button class="botonSust">Sustituir</button>
                    </a>
                </div>
            </div>
        </div>
    </div>
    </div>

    <h1>Banquillo</h1>
    <br>
    <div style="display: inline-block" th:each="jugador : ${equipo.jugBanquillo}">
        <div class="botonImagen">
            <img th:src="${jugador.foto}"/><a
                th:href="@{/equipo/{idEquipo}/jugador/{idJugador}/jornada/1 (idEquipo = ${equipo.id} ,idJugador= ${jugador.id})}">
            <button class="btn">Detalles</button>
        </a>
        </div>
        <div><b th:text="${jugador.puntos}"/> puntos</div>
    </div>
</h2>
<h2 th:if="${SinEquipo}">
    <h1>Todavía no tienes un equipo creado en esta liga, pincha aquí para crearlo.</h1>
    <a class="btn btn-default" th:href="@{/liga/{idLiga}/nuevoEquipo (idLiga= ${liga.id})}">
        <span class="glyphicon glyphicon-edit"></span> Crear equipo en esta liga</a>
</h2>

</body>

</html>
