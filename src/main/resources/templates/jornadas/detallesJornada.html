<!DOCTYPE html>

<html xmlns:th="http://www.thymeleaf.org" xmlns="http://www.w3.org/1999/html"
      th:replace="~{fragments/layout :: layout (~{::body},'detallesJornada')}">

<body>
<script>
    function cambiarFormacion(formacion) {
        var jugadores = document.getElementsByClassName("player");
        for (i = 0; i < jugadores.length; i++) {
            var clase = jugadores[i].className;

            if (clase.includes('433')) {
                jugadores[i].className = clase.replace('433', formacion);
            } else if (clase.includes('442')) {
                jugadores[i].className = clase.replace('442', formacion);
            } else if (clase.includes('352')) {
                jugadores[i].className = clase.replace('352', formacion);
            } else {
                jugadores[i].className = clase.replace('532', formacion);
            }

        }
    }

    function coloresPuntuaciones() {
        var puntuaciones = document.getElementsByClassName("circulo");

        for (i = 0; i < puntuaciones.length; i++) {
            var clase = puntuaciones[i]
            var puntuacion = parseInt(puntuaciones[i].innerHTML.replace("<p>", "").replace("</p>", ""));

            if (puntuacion < 0) {
                clase.style.backgroundColor = "#cf3b36";
            } else if (puntuacion === 0 || (puntuacion > 0 && puntuacion <= 5)) {
                clase.style.backgroundColor = "#ffef40";
            } else if ((puntuacion > 5 && puntuacion < 10)) {
                clase.style.backgroundColor = "#3cdb39";
            } else if ((puntuacion >= 10 && puntuacion < 15)) {
                clase.style.backgroundColor = "#22c9b9";
            } else {
                clase.style.backgroundColor = "#e83ace";

            }

        }
    }

    coloresPuntuaciones();
</script>

<h1 th:if="${ultimaJornada}">Última jornada:</h1>
<h2 th:object="${jornada}"> Jornada <b th:text="*{numeroJornada}"></b></h2>

<div class="dropdown">
    <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown"
            aria-haspopup="true" aria-expanded="true">
        Jornadas
        <span class="caret"></span>
    </button>
    <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">

        <li th:each="jornada : ${jornadas}"><a id=url th:text="*{jornada.numeroJornada}"
                                               th:href="@{/jornada/{idJornada} (idJornada= ${jornada.id})}"></a></li>
    </ul>
</div>
<br><br>
<div th:if="${noOnce}">
    <h1>No existe todavía once ideal de esta jornada.</h1>
</div>

<div>
    <div th:if="${!noOnce}">

        <div th:object="${jornada}">
            <div th:if="*{formacion}=='4-3-3'">
                <script>
                    $(document).ready(function () {
                        cambiarFormacion('433')
                    });
                </script>
            </div>
            <div th:if="*{formacion}=='3-5-2'">
                <script>
                    $(document).ready(function () {
                        cambiarFormacion('352')
                    });
                </script>
            </div>
            <div th:if="*{formacion}=='5-3-2'">
                <script>
                    $(document).ready(function () {
                        cambiarFormacion('532')
                    });
                </script>
            </div>

            <div>

                <script>
                    $(document).ready(function () {
                        coloresPuntuaciones()
                    });
                </script>
            </div>

            <div class="mejorJugadorJornada" style="float: left; border: 1px solid red; margin-right: 2%;">
                <div style="display: inline-block; width: 60%;">
                    <img class="fotoJugador" th:src="*{mejorJugador.jugador.foto}">
                    <div style="margin-top: 25px; margin-right: 20%; display: inline-block">
                        <h1 style="display: table-caption"><b th:text="*{mejorJugador.jugador.name}"></b></h1>
                        <h2>Valor: <b th:text="*{mejorJugador.jugador.valor}"></b> mill. €</h2>
                        <h2>Estado: <b th:text="*{mejorJugador.jugador.estadoLesion}"></b></h2>
                        <h2>Posición: <b th:text="*{mejorJugador.jugador.posicion}"></b></h2>
                    </div>
                </div>
                <div style="float: right; margin: 2%;">
                    <div align="center" style="border: 2px solid red; padding: 4px">
                        <img th:src="*{mejorJugador.jugador.club.escudo}" width="110px" height="100px">
                        <h2 th:text="*{mejorJugador.jugador.club.name}"/>
                    </div>
                </div>
            </div>
            <div style="float: top" th:replace="~{fragments/campoFutbol :: layout (${jornada.jugadores}, false)}"></div>
        </div>
    </div>

    <div th:object="${jornada}">

        <div style="display: inline-block;float: left;">
            <table id="partidos" class="table table-striped">
                <thead>
                <tr>
                    <th>Equipo Local</th>
                    <th>Equipo Visitante</th>
                    <th>Resultado</th>
                    <th>Fecha</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="partido : *{partidos}">
                    <td><a th:href="@{/equiposLiga/{nombreEquipo} (nombreEquipo= ${partido.equipoLocal.name})}"
                           th:text="${partido.equipoLocal.name}"/>
                    <td><a th:href="@{/equiposLiga/{nombreEquipo} (nombreEquipo= ${partido.equipoVisitante.name})}"
                           th:text="${partido.equipoVisitante.name}"/>
                    <td th:text="${partido.resultado}"/>
                    <td th:text="${partido.fecha}"/>
                </tr>
                </tbody>

            </table>
        </div>
    </div>
</div>
</body>
</html>
